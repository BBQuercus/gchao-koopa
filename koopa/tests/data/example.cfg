[General]
image_dir = /tungstenfs/scratch/gchao/eichbast/koopa/koopa/tests/data/test_in_flies
analysis_dir = /tungstenfs/scratch/gchao/eichbast/koopa/koopa/tests/data/test_out_flies
file_ext = nd
do_3d = True
do_timeseries = False
gpu_index = 0

[PreprocessingAlignment]
enabled = False
alignment_dir = ./
method = deepblink
model = ./
channel_reference = 0
channel_alignment = 1

[PreprocessingNormalization]
registration = max
frame_start = 0
frame_end = 0
crop_start = 400
crop_end = 1600
bin_axes = [1, 1, 0.5, 0.5]

[SpotsDetection]
channels = [0, 1]
models = ["/tungstenfs/scratch/gchao/deepblink/210910_141210_jess_hr38.h5", "/tungstenfs/scratch/gchao/deepblink/210910_141210_jess_hr38.h5"]
refinement_radius = 3

[SpotsTracking]
gap_frames = 0
min_length = 2
search_range = 2

[SpotsColocalization]
enabled = True
channels = [[0, 1]]
z_distance = 1
distance_cutoff = 5
min_frames = 0

[SegmentationCells]
selection = cyto
method_nuclei = otsu
method_cyto = triangle
channel_nuclei = 1
channel_cyto = 2
cellpose_diameter = 150
cellpose_resample = True
gaussian = 3
upper_clip = 0.95
min_size_nuclei = 5000
min_size_cyto = 5000
min_distance = 50
remove_border = True
border_distance = False

[SegmentationOther]
enabled = False
channels = [1]
methods = ["deep"]
models = ["/tungstenfs/scratch/gchao/deepblink/20210922_inceptionv3_aug.h5"]
backbones = ["inceptionv3"]

[FlyBrainCells]
enabled = False
channel = 2
batch_size = 4
min_intensity = 0
min_area = 200
max_area = 8000
dilation = 3
